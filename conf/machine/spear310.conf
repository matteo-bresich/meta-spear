#@TYPE: Machine
#@NAME: spear310 machine
#@DESCRIPTION: 

require conf/machine/include/tune-arm926ejs.inc

PREFERRED_PROVIDER_virtual/kernel ?= "linux-yocto"
PREFERRED_VERSION_linux-yocto ?= "5.4%"
KERNEL_IMAGETYPE = "zImage"
KERNEL_DEVICETREE = "spear310-evb.dtb"
KERNEL_DEVICETREE_BUNDLE = "1"
KERNEL_EXTRA_ARGS += "LOADADDR=${UBOOT_ENTRYPOINT}"

SERIAL_CONSOLES ?= "115200;ttyS0"
SERIAL_CONSOLES_CHECK = "${SERIAL_CONSOLES}"

IMAGE_FSTYPES += "tar.bz2 jffs2"
EXTRA_IMAGECMD_jffs2 = "-lnp "

#EXTRA_IMAGEDEPENDS += "u-boot"
UBOOT_MACHINE_spear310 = "spear310_defconfig"
UBOOT_ENTRYPOINT = "0x00000000"
UBOOT_LOADADDRESS = "0x00700000"

MACHINE_FEATURES = "vfat"

IMAGE_BOOT_FILES ?= "zImage spear310-evb.dtb"